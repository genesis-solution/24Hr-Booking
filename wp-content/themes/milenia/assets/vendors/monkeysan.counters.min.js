(function(d){function c(e,f){this.element=e;this.value=isFinite(this.element.data("value"))?this.element.data("value"):0;this.config=f&&d.isPlainObject(f)?d.extend(!0,{},b,f):b;this.waiting=!0;this.init()}var b={duration:1500,countWhenScrolled:"on"},a=[];c.prototype.init=function(){"off"!=this.config.countWhenScrolled&&this.reset()};c.prototype.reset=function(){this.waiting=!0;return this.element.data("value",0).attr("data-value",0)};c.prototype.count=function(e,f){this.reset();this.waiting=!1;return f?"requestAnimationFrame" in window&&"performance" in window?this.requestAnimation(e):this.baseAnimation(e):this.element.data("value",e).attr("data-value",e)};c.prototype.requestAnimation=function(e){var i=performance.now(),g=this;this.requestId=requestAnimationFrame(function f(j){j=performance.now()-i;j>g.config.duration&&(j=g.config.duration);var h=Math.ceil(j/g.config.duration*e);g.element.data("value",h).attr("data-value",h);j<g.config.duration&&requestAnimationFrame(f)})};c.prototype.baseAnimation=function(e){var g=(new Date).getTime(),f=this;this.animationIntervalId=setInterval(function(){var i=(new Date).getTime()-g;i>f.config.duration&&(i=f.config.duration);var j=Math.ceil(i/f.config.duration*e);f.element.data("value",j).attr("data-value",j);i>=f.config.duration&&clearInterval(f.animationIntervalId)},this.config.duration/60)};c.prototype.isWaitingForCounting=function(){return this.waiting};d.fn.WATCounters=function(e){var f=d(window);f.on("scroll.WATCounters",function(g){var h=!0,i=f.scrollTop()+f.height()-f.height()/4;a.forEach(function(k,j,l){i>=k.element.offset().top&&k.isWaitingForCounting()&&k.count(k.value,!0)});a.forEach(function(j){j.isWaitingForCounting()&&(h=!1)});h&&f.off("scroll.WATCounters")});setTimeout(function(){f.trigger("scroll.WATCounters")},10);return this.each(function(k,h){var j=d(h);if(!j.data("WATCounters")){var i=new c(j,e);e&&e.countWhenScrolled&&"on"==e.countWhenScrolled&&a.push(i);j.data("WATCounters",i)}})}})(window.jQuery);