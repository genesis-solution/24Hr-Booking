var MileniaEventsCalendar=(function(b){var a={isTouch:false,breakpoint:768,cssPrefix:"",rtl:getComputedStyle(document.body).direction==="rtl",classMap:{event:"events-event",tdEventTitle:"events-month-event-title",eventTooltip:"events-tooltip",dayNum:"events-daynum",tdSelected:"events-td--selected",eventTooltipReverseX:"event-tooltip--reverse-x",eventTooltipReverseY:"event-tooltip--reverse-y",eventOpened:"events-event--opened",prevented:"link--prevented",mobileContainer:"events-mobile-container"}};function c(e,d){this.config=b.isPlainObject(d)?b.extend(a,d):a;this.$container=e;Object.defineProperties(this,{tdEventTitleClass:{get:function(){return this.config.cssPrefix+this.config.classMap.tdEventTitle}},eventTooltipClass:{get:function(){return this.config.cssPrefix+this.config.classMap.eventTooltip}},eventTooltipReverseXClass:{get:function(){return this.config.cssPrefix+this.config.classMap.eventTooltipReverseX}},eventTooltipReverseYClass:{get:function(){return this.config.cssPrefix+this.config.classMap.eventTooltipReverseY}},eventClass:{get:function(){return this.config.cssPrefix+this.config.classMap.event}},eventOpenedClass:{get:function(){return this.config.cssPrefix+this.config.classMap.eventOpened}},preventedClass:{get:function(){return this.config.cssPrefix+this.config.classMap.prevented}},dayNumClass:{get:function(){return this.config.cssPrefix+this.config.classMap.dayNum}},tdSelectedClass:{get:function(){return this.config.cssPrefix+this.config.classMap.tdSelected}},mobileContainerClass:{get:function(){return this.config.cssPrefix+this.config.classMap.mobileContainer}}});this._bindEvents()}c.prototype._bindEvents=function(){var d=this,e=b(window);this.$container.on("mouseenter.MileniaEventsCalendar","."+this.tdEventTitleClass,function(h){var g=b(this),f=g.siblings("."+d.eventTooltipClass);if(!f.length){return}d.position(f)}).on("mouseleave.MileniaEventsCalendar","."+this.eventClass,function(f){b(this).removeClass(d.eventOpenedClass)}).on("click.MileniaEventsCalendar","."+this.tdEventTitleClass+" a",function(g){var f=b(this);if(d.config.isTouch&&!f.hasClass(d.preventedClass)){f.addClass(d.preventedClass);d.$container.find("a").not(f).removeClass(d.preventedClass);g.preventDefault()}}).on("click.MileniaEventsCalendar","."+this.dayNumClass,function(f){if(b(window).width()>=d.config.breakpoint){return}d.openEvents(b(this))});e.on("resize.MileniaEventsCalendar",function(){if(d.resizeTimeOutId){clearTimeout(d.resizeTimeOutId)}d.resizeTimeOutId=setTimeout(function(){if(e.width()>d.config.breakpoint){var f=d.$container.siblings("."+d.mobileContainerClass);d.$container.find("."+d.tdSelectedClass).removeClass(d.tdSelectedClass);if(f.length){f.add(f.find("[data-day]")).hide()}}},200)})};c.prototype.position=function(e){var d=e.offset().left+e.outerWidth(),g=e.offset().top,f=b(window);if(e.hasClass(this.eventTooltipReverseXClass)||e.hasClass(this.eventTooltipReverseYClass)){e.removeClass(this.eventTooltipReverseXClass).removeClass(this.eventTooltipReverseYClass);this.position(e)}if(!this.config.rtl){if(d>f.width()){e.addClass(this.eventTooltipReverseXClass)}}else{if(e.offset().left<0){e.addClass(this.eventTooltipReverseXClass)}}if(g<f.scrollTop()){e.addClass(this.eventTooltipReverseYClass)}e.stop().parent().addClass(this.eventOpenedClass)};c.prototype.openEvents=function(f){var e=this.$container.siblings("."+this.mobileContainerClass),g,h,i=f.closest("td"),d=i.data("day");i.addClass(this.tdSelectedClass);this.$container.find("."+this.tdSelectedClass).not(i).removeClass(this.tdSelectedClass);if(!e.length){return}g=e.find("[data-day]");if(g.length){h=g.hide().filter('[data-day="'+d+'"]');if(h.length){e.add(h).show()}else{e.hide()}}};return{init:function(e,d){if(!e||!e.length){return}return e.each(function(g,h){var f=b(h);if(f.data("MileniaEventsCalendar")){return}f.data("MileniaEventsCalendar",new c(f,d))})}}})(window.jQuery);