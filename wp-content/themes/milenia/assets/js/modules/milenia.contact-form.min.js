var MileniaContactForm=(function(c){var b={url:"php/contact.php",onSuccess:function(d){},onError:function(d){}};function a(f,e){var d=this;this.form=f;this.config=e;this.initValidator();f.data("config",e)}a.prototype.initValidator=function(){var d=this,e=this.form.get(0);if(!(e instanceof HTMLFormElement)||!window.Validator){return}this.form.data("validator",new Validator({form:e,cssPrefix:"milenia-",incorrectClass:"invalid",correctClass:"valid",rules:[{element:e.elements.cf_name,name:"Name",rules:{empty:null}},{element:e.elements.cf_message,name:"Message",rules:{empty:null,min:10}},{element:e.elements.cf_email,name:"Email",rules:{empty:null,pattern:/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i}}],onIncorrect:function(g){var f=c(e).siblings(".milenia-alert-box-error");if(Milenia&&Milenia.modules&&Milenia.modules.alertMessage){Milenia.modules.alertMessage({target:d.form,type:"error",message:g})}},onCorrect:d.send}))};a.prototype.send=function(){var d=c(this),e=d.data("config");c.ajax({url:e.url,type:"POST",dataType:"json",data:d.serialize(),success:function(f){if(f.status&&f.status=="fail"){if(Milenia&&Milenia.modules&&Milenia.modules.alertMessage){Milenia.modules.alertMessage({target:d,type:"error",message:f.errors})}d.trigger("milenia.contactFormMessage");e.onError.call(d,f)}else{if(f.status&&f.status=="success"){if(Milenia&&Milenia.modules&&Milenia.modules.alertMessage){Milenia.modules.alertMessage({target:d,type:"success",message:f.statusText})}d.find("input, textarea").val("");d.trigger("milenia.contactFormMessage");e.onSuccess.call(d,f)}}},error:function(f,h,g){if(Milenia&&Milenia.modules&&Milenia.modules.alertMessage){Milenia.modules.alertMessage({target:d,type:"error",message:g})}d.trigger("milenia.contactFormMessage");e.onError.call(d,arguments)}})};return{init:function(e,d){if(!e||!e.length){return false}d=d&&c.isPlainObject(d)?c.extend(true,{},b,d):b;return e.each(function(f,g){var h=c(g);if(h.data("ContactForm")){return}h.data("ContactForm",new a(h,d))})}}})(jQuery);