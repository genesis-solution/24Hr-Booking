(function(b){var a=b("body");b.MileniaAdmin={};b.MileniaAdmin.helpers={};b.MileniaAdmin.DOMReady=function(){if(this.helpers.metaBoxConditionalLogicPostFormat){this.helpers.metaBoxConditionalLogicPostFormat.init(b("#post-formats-select"),{optionsBlockIDMask:"milenia-post-options-%s%"})}if(this.helpers.uploadButton){this.helpers.uploadButton()}};b.MileniaAdmin.outerResourcesReady=function(){if(this.helpers.independentLinks){this.helpers.independentLinks(".vc_ui-button")}if(this.helpers.adminIconPicker){this.helpers.adminIconPicker()}var c=b(".rwmb-select, .milenia-styled-select, .rwmb-checkbox, .milenia-styled-input, .rwmb-number");if(c&&b.fn.styler){c.styler()}b.MileniaAdmin.LinkUnderliner.init(b("a.milenia-admin-underlined-link"))};b.MileniaAdmin.LinkUnderliner={_$collection:b(),_config:{except:null,exceptClass:null},init:function(f,d){var c=this,e;if(!f.length){return}this.config=b.extend(true,{},this._config,b.isPlainObject(d)?d:{});if(!this._bindedEvents){this._bindEvents()}e=b();f.each(function(h,i){var g=b(i);if(c._$collection.filter(g).length){return}if(g.is(c.config.except)){g.addClass(c.config.exceptClass);return}c._$collection=c._$collection.add(g);e=e.add(g)});return this.toUnderline(e)},isRTL:function(){return getComputedStyle(document.body).direction==="rtl"},_bindEvents:function(){var c=this;b(window).on("resize.MileniaLinksUnderline",function(){if(c.resizeTimeOutId){clearTimeout(c.resizeTimeOutId)}c.resizeTimeOutId=setTimeout(function(){c.toUnderline(c._$collection)},100)})},toUnderline:function(d){var c=this;if(!d.length){return}return d.each(function(h,i){var f=b(i),e=getComputedStyle(f.get(0)).transitionDuration,g=parseFloat(e,10)*1000;if(g){setTimeout(function(){c.setUnderlineToElement(f)},g)}else{c.setUnderlineToElement(f)}})},setUnderlineToElement:function(c){var d=c.css("background-position").split(" "),e;c.css("white-space","nowrap");e=c.outerHeight()-1;c.css("white-space","");if(this.isRTL()&&d[0]){d[0]="100%"}if(d[1]){d[1]=e+"px"}c.css("background-position",d.join(" "))}};b(function(){b.MileniaAdmin.DOMReady()});b(window).on("load",function(c){b.MileniaAdmin.outerResourcesReady()});b.MileniaAdmin.helpers.adminIconPicker=function(){var c=b(".milenia-admin-iconpicker");if(c.length){c.each(function(e,g){var f=b(g),h=f.find('input[type="hidden"]'),d=f.find("[data-icon-value]");d.removeClass("milenia-admin-iconpicker-active").filter('[data-icon-value="'+h.val()+'"]').addClass("milenia-admin-iconpicker-active")})}b("body").on("click.MileniaAdmin",".milenia-admin-iconpicker button",function(d){var f=b(this),g=f.closest(".milenia-admin-iconpicker").find('input[type="hidden"]'),e=f.data("icon-value");f.addClass("milenia-admin-iconpicker-active").parent().siblings().children().removeClass("milenia-admin-iconpicker-active");if(g.length){g.val(e)}d.preventDefault()})};b.MileniaAdmin.helpers.metaBoxConditionalLogicPostFormat={};b.MileniaAdmin.helpers.metaBoxConditionalLogicPostFormat._config={optionsBlockIDMask:"post-options-%s%"};b.MileniaAdmin.helpers.metaBoxConditionalLogicPostFormat.init=function(e,d){var c;if(!e||!e.length){return}c=this;this.config=b.isPlainObject(d)?b.extend(true,{},this._config,d):this._config;c.setOptionsBlockState(e.find('input[type="radio"]:checked'));e.on("change.MileniaAdminMetaBoxPostFormat",'input[type="radio"]',function(f){c.setOptionsBlockState(b(this));f.preventDefault()})};b.MileniaAdmin.helpers.metaBoxConditionalLogicPostFormat.setOptionsBlockState=function(f){var e=f.val(),d=b('div[id*="'+this.config.optionsBlockIDMask.replace("%s%","")+'"]'),c=b("#"+this.config.optionsBlockIDMask.replace("%s%",e));d.not(c).hide();c.show()};b.MileniaAdmin.helpers.independentLinks=function(c){b("a").each(function(d,f){var e=b(f);if(e.is(c)){e.addClass("milenia-ln--independent")}})};b.MileniaAdmin.helpers.uploadButton=function(){b("body").off("click.MileniaAdminUploadButton").on("click.MileniaAdminUploadButton",".milenia-upload-btn-select",function(j){j.preventDefault();var h=b(this),i=h.siblings(".milenia-upload-btn-remove"),m=h.siblings(".milenia-upload-btn-input"),c=h.siblings(".milenia-upload-btn-images"),d,f,g=!!h.data("multiple"),k,l=wp.media({title:window.MileniaAdminLocalization&&window.MileniaAdminLocalization.custom_uploader_title||"Insert Image",library:{type:"image"},button:{text:window.MileniaAdminLocalization&&window.MileniaAdminLocalization.custom_uploader_title||"Use this image"},multiple:g}).on("select",function(o){var n,e;if(!i.length||!m.length){return}if(g){n=l.state().get("selection");if(n){d=h.closest(".widget");k=[];n.each(function(p){k.push(p.attributes.id);e='<figure class="milenia-upload-btn-image">                                    <img src="%image_url%" alt="">                                    <div class="milenia-upload-btn-image-controls">                                        <div class="milenia-upload-btn-image-control">                                            <label for="%id%">%label%</label>                                            <input type="text" class="widefat" id="%id%" name="%name%">                                        </div>                                    </div>                                </figure>';if(c.length){c.append(e.replace("%image_url%",p.attributes.sizes.full.url).replace("%id%",c.data("id")+"-"+p.attributes.id+"-href").replace("%id%",c.data("id")+"-"+p.attributes.id+"-href").replace("%label%",c.data("label")).replace("%name%",c.data("name")+"["+p.attributes.id+"]"))}});h.hide();m.val(k.join(","));i.show();if(d.length){f=d.find(".widget-control-save");if(f.length){f.removeAttr("disabled")}}}}else{n=l.state().get("selection").first().toJSON();if(n){d=h.closest(".widget");h.hide();m.val(n.id);i.show();if(c.length){c.html('<img src="'+n.sizes.thumbnail.url+'" alt="">')}if(d.length){f=d.find(".widget-control-save");if(f.length){f.removeAttr("disabled")}}}}}).open()});b("body").off("click.MileniaAdminUploadRemoveButton").on("click.MileniaAdminUploadRemoveButton",".milenia-upload-btn-remove",function(){var f=b(this),e=f.siblings(".milenia-upload-btn-select"),d=f.siblings(".milenia-upload-btn-input"),c=f.siblings(".milenia-upload-btn-images"),h,g;if(!e.length||!d.length){return}e.show();f.hide();d.val("");h=f.closest(".widget");if(h.length){g=h.find(".widget-control-save");if(g.length){g.removeAttr("disabled")}}if(c.length){c.html("")}})}})(window.jQuery);