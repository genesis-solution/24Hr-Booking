var MileniaTabbedGrid=(function(j){var g=j(),h;var f={cssPrefix:"",startAt:0,easing:"linear",duration:400,classMap:{container:"grid",item:"grid-item",active:"grid-item--current",loading:"grid--tabbed-loading"}};j(window).on("resize.TabbedGrid",function(){if(h){clearTimeout(h)}h=setTimeout(function(){g.each(function(b,a){j(a).data("TabbedGrid").resize()})},300)});function i(b,a){this.$element=b;this.config=j.extend(true,{},f,a);Object.defineProperties(this,{containerClass:{get:function(){return this.config.cssPrefix+this.config.classMap.container}},itemClass:{get:function(){return this.config.cssPrefix+this.config.classMap.item}},activeItemClass:{get:function(){return this.config.cssPrefix+this.config.classMap.active}},loadingClass:{get:function(){return this.config.cssPrefix+this.config.classMap.loading}},$items:{get:function(){return this.$element.find("."+this.itemClass)}}});this._prepare().show(this.config.startAt,true)}i.prototype._prepare=function(){this.$element.css("position","relative");this.$items.css({overflow:"hidden",position:"absolute",top:0,right:0,left:0});return this};i.prototype.getCurrentItemIndex=function(){if(!this.$items.length){return 0}return this.$items.filter("."+this.activeItemClass).index()};i.prototype.show=function(c,b){var a=this.$items,d=this;this._hideItems(a.not(a.eq(c)));if(!a.eq(c).length){this.$element.stop().animate({height:0},{easing:d.config.easing,duration:d.config.duration,complete:function(){if(b){d.$element.removeClass(d.loadingClass)}}});return}this._showItem(a.eq(c),b)};i.prototype._hideItems=function(a){var b=this;a.removeClass(this.activeItemClass).css("z-index",1).stop().animate({opacity:0},{easing:b.config.easing,duration:b.config.duration});return this};i.prototype._showItem=function(b,a){var c=this;this.$element.stop().animate({height:b.outerHeight()},{easing:c.config.easing,duration:c.config.duration,complete:function(){if(a){c.$element.removeClass(c.loadingClass)}b.addClass(c.activeItemClass).stop().css("z-index",2).animate({opacity:1},{easing:c.config.easing,duration:c.config.duration,complete:function(){c.$element.trigger("item.shown.tabbedgrid",[c.$element])}})}});return this};i.prototype.resize=function(){var a=this;this.$element.stop().animate({height:a.$items.filter("."+a.activeItemClass).outerHeight()},{easing:a.config.easing,duration:a.config.duration,complete:function(){a.$element.removeClass(a.loadingClass);a.$element.trigger("grid.resized.tabbedgrid",[a.$element])}});return this};return{init:function(a,b){b=b||{};return a.each(function(d,c){var e=j(c);if(e.data("TabbedGrid")){return}e.data("TabbedGrid",new i(e,b));g=g.add(e)})}}})(window.jQuery);