(function(c){var a={duration:1500,countWhenScrolled:"on"},b=[];function d(f,e){this.element=f;this.value=isFinite(this.element.data("value"))?this.element.data("value"):0;this.config=e&&c.isPlainObject(e)?c.extend(true,{},a,e):a;this.waiting=this.config.countWhenScrolled=="on";this.init()}d.prototype.init=function(){if(this.config.countWhenScrolled=="off"){return}this.reset()};d.prototype.reset=function(){this.waiting=true;return this.element.data("value",0).attr("data-value",0)};d.prototype.count=function(f,e){this.reset();this.waiting=false;if(!e){return this.element.data("value",f).attr("data-value",f)}if(("requestAnimationFrame" in window)&&("performance" in window)){return this.requestAnimation(f)}else{return this.baseAnimation(f)}};d.prototype.requestAnimation=function(g){var h=performance.now(),e=this;this.requestId=requestAnimationFrame(function f(k){var j=performance.now()-h,i;if(j>e.config.duration){j=e.config.duration}i=Math.ceil(j/e.config.duration*g);e.element.data("value",i).attr("data-value",i);if(j<e.config.duration){requestAnimationFrame(f)}})};d.prototype.baseAnimation=function(f){var h=(new Date()).getTime(),e=this,g=this.config.duration/60;this.animationIntervalId=setInterval(function(){var j=(new Date()).getTime()-h,i;if(j>e.config.duration){j=e.config.duration}i=Math.ceil(j/e.config.duration*f);e.element.data("value",i).attr("data-value",i);if(j>=e.config.duration){clearInterval(e.animationIntervalId)}},g)};d.prototype.isWaitingForCounting=function(){return this.waiting};c.fn.WATCounters=function(e){var f=c(window);f.on("scroll.WATCounters",function(h){var g=true,i=f.scrollTop()+f.height()-(f.height()/4);b.forEach(function(l,k,j){if(i>=l.element.offset().top&&l.isWaitingForCounting()){l.count(l.value,true)}});b.forEach(function(j){if(j.isWaitingForCounting()){g=false}});if(g){f.off("scroll.WATCounters")}});setTimeout(function(){f.trigger("scroll.WATCounters")},10);return this.each(function(h,j){var k=c(j);if(!k.data("WATCounters")){var g=new d(k,e);b.push(g);k.data("WATCounters",g)}})}})(jQuery);