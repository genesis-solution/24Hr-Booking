var InstafeedWrapper=(function(b){var f={};var a={};function g(h,i){this.container=h;this.ID=this.container.getAttribute("id");this.instance=f[this.ID]=new b(this._overrideOptions(i));this.instance.run();e(this.container,"ifw-container-loading");this._initLoadMoreControl()}g.prototype._overrideOptions=function(h){var k=this.container.dataset;h.target=this.ID;h=this._admixCallbacks(h);for(var j in k){if(j=="user"){if(k[j] in a){for(var i in a[k[j]]){h[i]=a[k[j]][i]}}else{throw new Error("The secure options for user "+k[j]+" isn't set.")}continue}h[j]=k[j]}return h};g.prototype._admixCallbacks=function(i){var h=this,j=i.after;i.after=function(){if(!h._initialized){d(h.container,"ifw-container-loading");h._initialized=true}if(h.loadMoreControl&&h.loadMoreControl.dataset.ifwLoadingContent&&h.loadMoreControl.dataset.ifwBaseText){h.loadMoreControl.textContent=h.loadMoreControl.dataset.ifwBaseText}if(!this.hasNext()&&h.loadMoreControl){h.loadMoreControl.setAttribute("disabled","disabled");e(h.loadMoreControl,"ifw-disabled");if(h.loadMoreControl.dataset.ifwDisabledContent){h.loadMoreControl.textContent=h.loadMoreControl.dataset.ifwDisabledContent}}if(j){j.apply(this,Array.prototype.slice(arguments,0))}};return i};g.prototype._initLoadMoreControl=function(){var i=this.container.dataset.loadMoreControl,h=this;if(!i){return this}this.loadMoreControl=document.getElementById(i);if(!this.loadMoreControl){return this}this.loadMoreControl.dataset.ifwBaseText=this.loadMoreControl.textContent;this.loadMoreControl.addEventListener("click",function(j){if(c(this,"ifw-disabled")){j.preventDefault();return false}h.instance.next();if(this.dataset.ifwLoadingContent){this.textContent=this.dataset.ifwLoadingContent}j.preventDefault()},false);return this};return{init:function(i,h){h=h||{};Array.prototype.forEach.call(i,function(j,k,l){if(j.getAttribute("id") in f){throw new Error("One of the specified containers duplicates an existing ID.")}if(!j.hasAttribute("id")){throw new Error("One of the specified containers doesn't have a unique ID.")}new g(j,h)})},setUsersSecureOptions:function(i){for(var h in i){if(h in a){throw new Error("The secure options for user "+h+" is already set.")}if(!("userId" in i[h])||!("accessToken" in i[h])||!("clientId" in i[h])){throw new Error('You must specify "userId", "accessToken" and "clientId" option for each user.')}a[h]=i[h]}}};function e(h,i){h.className=h.className+" "+i;return h}function d(h,i){h.className=h.className.replace(i,"");return h}function c(h,i){return h.className.indexOf(i)!=-1}})(window.Instafeed);