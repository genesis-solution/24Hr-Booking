(function(a){"function"===typeof define&&define.amd?define(["jquery.formstyler.min"],a):"object"===typeof exports?module.exports=a(require("jquery")):a(jQuery)})(function(a){function f(g,b){this.element=g;this.options=a.extend({},e,b);this.init()}function d(h){if(!a(h.target).parents().hasClass("jq-selectbox")&&"OPTION"!=h.target.nodeName&&a("div.jq-selectbox.opened").length){h=a("div.jq-selectbox.opened");var b=a("div.jq-selectbox__search input",h),g=a("div.jq-selectbox__dropdown",h);h.find("select").data("_"+c).options.onSelectClosed.call(h);b.length&&b.val("").keyup();g.hide().find("li.sel").addClass("selected");h.removeClass("focused opened dropup dropdown")}}var c="styler",e={wrapper:"form",idSuffix:"-styler",filePlaceholder:"\u0424\u0430\u0439\u043b \u043d\u0435 \u0432\u044b\u0431\u0440\u0430\u043d",fileBrowse:"\u041e\u0431\u0437\u043e\u0440...",fileNumber:"\u0412\u044b\u0431\u0440\u0430\u043d\u043e \u0444\u0430\u0439\u043b\u043e\u0432: %s",selectPlaceholder:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435...",selectSearch:!1,selectSearchLimit:10,selectSearchNotFound:"\u0421\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e",selectSearchPlaceholder:"\u041f\u043e\u0438\u0441\u043a...",selectVisibleOptions:0,singleSelectzIndex:"100",selectSmartPositioning:!0,onSelectOpened:function(){},onSelectClosed:function(){},onFormStyled:function(){}};f.prototype={init:function(){function m(){var h="",u="",v="",s="";void 0!==p.attr("id")&&""!==p.attr("id")&&(h=' id="'+p.attr("id")+k.idSuffix+'"');void 0!==p.attr("title")&&""!==p.attr("title")&&(u=' title="'+p.attr("title")+'"');void 0!==p.attr("class")&&""!==p.attr("class")&&(v=" "+p.attr("class"));var q=p.data(),r;for(r in q){""!==q[r]&&"_styler"!==r&&(s+=" data-"+r+'="'+q[r]+'"')}this.id=h+s;this.title=u;this.classes=v}var p=a(this.element),k=this.options,o=navigator.userAgent.match(/(iPad|iPhone|iPod)/i)&&!navigator.userAgent.match(/(Windows\sPhone)/i)?!0:!1,j=navigator.userAgent.match(/Android/i)&&!navigator.userAgent.match(/(Windows\sPhone)/i)?!0:!1;if(p.is(":checkbox")){var n=function(){var h=new m,q=a("<div"+h.id+' class="jq-checkbox'+h.classes+'"'+h.title+'><div class="jq-checkbox__div"></div></div>');p.css({position:"absolute",zIndex:"-1",opacity:0,margin:0,padding:0}).after(q).prependTo(q);q.attr("unselectable","on").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none",display:"inline-block",position:"relative",overflow:"hidden"});p.is(":checked")&&q.addClass("checked");p.is(":disabled")&&q.addClass("disabled");q.click(function(r){r.preventDefault();q.is(".disabled")||(p.is(":checked")?(p.prop("checked",!1),q.removeClass("checked")):(p.prop("checked",!0),q.addClass("checked")),p.focus().change())});p.closest("label").add('label[for="'+p.attr("id")+'"]').on("click.styler",function(r){a(r.target).is("a")||a(r.target).closest(q).length||(q.triggerHandler("click"),r.preventDefault())});p.on("change.styler",function(){p.is(":checked")?q.addClass("checked"):q.removeClass("checked")}).on("keydown.styler",function(r){32==r.which&&q.click()}).on("focus.styler",function(){q.is(".disabled")||q.addClass("focused")}).on("blur.styler",function(){q.removeClass("focused")})};n();p.on("refresh",function(){p.closest("label").add('label[for="'+p.attr("id")+'"]').off(".styler");p.off(".styler").parent().before(p).remove();n()})}else{if(p.is(":radio")){var i=function(){var h=new m,q=a("<div"+h.id+' class="jq-radio'+h.classes+'"'+h.title+'><div class="jq-radio__div"></div></div>');p.css({position:"absolute",zIndex:"-1",opacity:0,margin:0,padding:0}).after(q).prependTo(q);q.attr("unselectable","on").css({"-webkit-user-select":"none","-moz-user-select":"none","-ms-user-select":"none","-o-user-select":"none","user-select":"none",display:"inline-block",position:"relative"});p.is(":checked")&&q.addClass("checked");p.is(":disabled")&&q.addClass("disabled");q.click(function(r){r.preventDefault();q.is(".disabled")||(q.closest(k.wrapper).find('input[name="'+p.attr("name")+'"]').prop("checked",!1).parent().removeClass("checked"),p.prop("checked",!0).parent().addClass("checked"),p.focus().change())});p.closest("label").add('label[for="'+p.attr("id")+'"]').on("click.styler",function(r){a(r.target).is("a")||a(r.target).closest(q).length||(q.triggerHandler("click"),r.preventDefault())});p.on("change.styler",function(){p.parent().addClass("checked")}).on("focus.styler",function(){q.is(".disabled")||q.addClass("focused")}).on("blur.styler",function(){q.removeClass("focused")})};i();p.on("refresh",function(){p.closest("label").add('label[for="'+p.attr("id")+'"]').off(".styler");p.off(".styler").parent().before(p).remove();i()})}else{if(p.is(":file")){p.css({position:"absolute",top:0,right:0,width:"100%",height:"100%",opacity:0,margin:0,padding:0});var g=function(){var q=new m,t=p.data("placeholder");void 0===t&&(t=k.filePlaceholder);var h=p.data("browse");if(void 0===h||""===h){h=k.fileBrowse}var s=a("<div"+q.id+' class="jq-file'+q.classes+'"'+q.title+' style="display: inline-block; position: relative; overflow: hidden"></div>'),r=a('<div class="jq-file__name">'+t+"</div>").appendTo(s);a('<div class="jq-file__browse">'+h+"</div>").appendTo(s);p.after(s).appendTo(s);p.is(":disabled")&&s.addClass("disabled");p.on("change.styler",function(){var u=p.val();if(p.is("[multiple]")){var u="",v=p[0].files.length;0<v&&(u=p.data("number"),void 0===u&&(u=k.fileNumber),u=u.replace("%s",v))}r.text(u.replace(/.+[\\\/]/,""));""===u?(r.text(t),s.removeClass("changed")):s.addClass("changed")}).on("focus.styler",function(){s.addClass("focused")}).on("blur.styler",function(){s.removeClass("focused")}).on("click.styler",function(){s.removeClass("focused")})};g();p.on("refresh",function(){p.off(".styler").parent().before(p).remove();g()})}else{if(p.is('input[type="number"]')){var b=function(){var w=a('<div class="jq-number"><div class="jq-number__spin minus"></div><div class="jq-number__spin plus"></div></div>');p.after(w).prependTo(w).wrap('<div class="jq-number__field"></div>');p.is(":disabled")&&w.addClass("disabled");var v,s,u,q=null,r=null;void 0!==p.attr("min")&&(v=p.attr("min"));void 0!==p.attr("max")&&(s=p.attr("max"));u=void 0!==p.attr("step")&&a.isNumeric(p.attr("step"))?Number(p.attr("step")):Number(1);var h=function(x){var y=p.val(),t;a.isNumeric(y)||(y=0,p.val("0"));x.is(".minus")?(t=parseInt(y,10)-u,0<u&&(t=Math.ceil(t/u)*u)):x.is(".plus")&&(t=parseInt(y,10)+u,0<u&&(t=Math.floor(t/u)*u));a.isNumeric(v)&&a.isNumeric(s)?t>=v&&t<=s&&p.val(t):a.isNumeric(v)&&!a.isNumeric(s)?t>=v&&p.val(t):!a.isNumeric(v)&&a.isNumeric(s)?t<=s&&p.val(t):p.val(t)};w.is(".disabled")||(w.on("mousedown","div.jq-number__spin",function(){var t=a(this);h(t);q=setTimeout(function(){r=setInterval(function(){h(t)},40)},350)}).on("mouseup mouseout","div.jq-number__spin",function(){clearTimeout(q);clearInterval(r)}),p.on("focus.styler",function(){w.addClass("focused")}).on("blur.styler",function(){w.removeClass("focused")}))};b();p.on("refresh",function(){p.off(".styler").closest(".jq-number").before(p).remove();b()})}else{if(p.is("select")){var l=function(){function h(t){t.off("mousewheel DOMMouseScroll").on("mousewheel DOMMouseScroll",function(w){var x=null;"mousewheel"==w.type?x=-1*w.originalEvent.wheelDelta:"DOMMouseScroll"==w.type&&(x=40*w.originalEvent.detail);x&&(w.stopPropagation(),w.preventDefault(),a(this).scrollTop(x+a(this).scrollTop()))})}function v(){for(var E=0;E<q.length;E++){var D=q.eq(E),C="",B="",A=C="",H="",x="",G="",F="",z="";D.prop("selected")&&(B="selected sel");D.is(":disabled")&&(B="disabled");D.is(":selected:disabled")&&(B="selected sel disabled");void 0!==D.attr("id")&&""!==D.attr("id")&&(A=' id="'+D.attr("id")+k.idSuffix+'"');void 0!==D.attr("title")&&""!==q.attr("title")&&(H=' title="'+D.attr("title")+'"');void 0!==D.attr("class")&&(G=" "+D.attr("class"),z=' data-jqfs-class="'+D.attr("class")+'"');var y=D.data(),t;for(t in y){""!==y[t]&&(x+=" data-"+t+'="'+y[t]+'"')}""!==B+G&&(C=' class="'+B+G+'"');C="<li"+z+x+C+H+A+">"+D.html()+"</li>";D.parent().is("optgroup")&&(void 0!==D.parent().attr("class")&&(F=" "+D.parent().attr("class")),C="<li"+z+x+' class="'+B+G+" option"+F+'"'+H+A+">"+D.html()+"</li>",D.is(":first-child")&&(C='<li class="optgroup'+F+'">'+D.parent().attr("label")+"</li>"+C));r+=C}}function u(){var ac=new m,Q="",z=p.data("placeholder"),Z=p.data("search"),aa=p.data("search-limit"),N=p.data("search-not-found"),W=p.data("search-placeholder"),K=p.data("z-index"),G=p.data("smart-positioning");void 0===z&&(z=k.selectPlaceholder);if(void 0===Z||""===Z){Z=k.selectSearch}if(void 0===aa||""===aa){aa=k.selectSearchLimit}if(void 0===N||""===N){N=k.selectSearchNotFound}void 0===W&&(W=k.selectSearchPlaceholder);if(void 0===K||""===K){K=k.singleSelectzIndex}if(void 0===G||""===G){G=k.selectSmartPositioning}var ab=a("<div"+ac.id+' class="jq-selectbox jqselect'+ac.classes+'" style="display: inline-block; position: relative; z-index:'+K+'"><div class="jq-selectbox__select"'+ac.title+' style="position: relative"><div class="jq-selectbox__select-text"></div><div class="jq-selectbox__trigger"><div class="jq-selectbox__trigger-arrow"></div></div></div></div>');p.css({margin:0,padding:0}).after(ab).prependTo(ab);var t=a("div.jq-selectbox__select",ab),S=a("div.jq-selectbox__select-text",ab),ac=q.filter(":selected");v();Z&&(Q='<div class="jq-selectbox__search"><input type="search" autocomplete="off" placeholder="'+W+'"></div><div class="jq-selectbox__not-found">'+N+"</div>");var Y=a('<div class="jq-selectbox__dropdown" style="position: absolute">'+Q+'<ul style="position: relative; list-style: none; overflow: auto; overflow-x: hidden">'+r+"</ul></div>");ab.append(Y);var U=a("ul",Y),X=a("li",Y),O=a("input",Y),V=a("div.jq-selectbox__not-found",Y).hide();X.length<aa&&O.parent().hide();""===p.val()?S.text(z).addClass("placeholder"):S.text(ac.text());var M=0,T=0;X.each(function(){var w=a(this);w.css({display:"inline-block"});w.innerWidth()>M&&(M=w.innerWidth(),T=w.width());w.css({display:""})});S.is(".placeholder")&&S.width()>M?S.width(S.width()):(Q=ab.clone().appendTo("body").width("auto"),Z=Q.outerWidth(),Q.remove(),Z==ab.outerWidth()&&S.width(T));M>ab.width()&&Y.width(M);""===q.first().text()&&""!==p.data("placeholder")&&X.first().hide();p.css({position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:0});var R=ab.outerHeight(),y=O.outerHeight(),x=U.css("max-height"),Q=X.filter(".selected");1>Q.length&&X.first().addClass("selected sel");void 0===X.data("li-height")&&X.data("li-height",X.outerHeight());var P=Y.css("top");"auto"==Y.css("left")&&Y.css({left:0});"auto"==Y.css("top")&&Y.css({top:R});Y.hide();Q.length&&(q.first().text()!=ac.text()&&ab.addClass("changed"),ab.data("jqfs-class",Q.data("jqfs-class")),ab.addClass(Q.data("jqfs-class")));if(p.is(":disabled")){return ab.addClass("disabled"),!1}t.click(function(){a("div.jq-selectbox").filter(".opened").length&&k.onSelectClosed.call(a("div.jq-selectbox").filter(".opened"));p.focus();if(!o){var H=a(window),F=X.data("li-height"),E=ab.offset().top,w=H.height()-R-(E-H.scrollTop()),D=p.data("visible-options");if(void 0===D||""===D){D=k.selectVisibleOptions}var B=5*F,A=F*D;0<D&&6>D&&(B=A);0===D&&(A="auto");var D=function(){Y.height("auto").css({bottom:"auto",top:P});var I=function(){U.css("max-height",Math.floor((w-20-y)/F)*F)};I();U.css("max-height",A);"none"!=x&&U.css("max-height",x);w<Y.outerHeight()+20&&I()},C=function(){Y.height("auto").css({top:"auto",bottom:P});var I=function(){U.css("max-height",Math.floor((E-H.scrollTop()-20-y)/F)*F)};I();U.css("max-height",A);"none"!=x&&U.css("max-height",x);E-H.scrollTop()-20<Y.outerHeight()+20&&I()};!0===G||1===G?w>B+y+20?(D(),ab.removeClass("dropup").addClass("dropdown")):(C(),ab.removeClass("dropdown").addClass("dropup")):(!1===G||0===G)&&w>B+y+20&&(D(),ab.removeClass("dropup").addClass("dropdown"));ab.offset().left+Y.outerWidth()>H.width()&&Y.css({left:"auto",right:0});a("div.jqselect").css({zIndex:K-1}).removeClass("opened");ab.css({zIndex:K});Y.is(":hidden")?(a("div.jq-selectbox__dropdown:visible").hide(),Y.show(),ab.addClass("opened focused"),k.onSelectOpened.call(ab)):(Y.hide(),ab.removeClass("opened dropup dropdown"),a("div.jq-selectbox").filter(".opened").length&&k.onSelectClosed.call(ab));O.length&&(O.val("").keyup(),V.hide(),O.keyup(function(){var I=a(this).val();X.each(function(){a(this).html().match(RegExp(".*?"+I+".*?","i"))?a(this).show():a(this).hide()});""===q.first().text()&&""!==p.data("placeholder")&&X.first().hide();1>X.filter(":visible").length?V.show():V.hide()}));X.filter(".selected").length&&(""===p.val()?U.scrollTop(0):(0!==U.innerHeight()/F%2&&(F/=2),U.scrollTop(U.scrollTop()+X.filter(".selected").position().top-U.innerHeight()/2+F)));h(U)}});X.hover(function(){a(this).siblings().removeClass("selected")});X.filter(".selected").text();X.filter(":not(.disabled):not(.optgroup)").click(function(){p.focus();var B=a(this),A=B.text();if(!B.is(".selected")){var w=B.index(),w=w-B.prevAll(".optgroup").length;B.addClass("selected sel").siblings().removeClass("selected sel");q.prop("selected",!1).eq(w).prop("selected",!0);S.text(A);ab.data("jqfs-class")&&ab.removeClass(ab.data("jqfs-class"));ab.data("jqfs-class",B.data("jqfs-class"));ab.addClass(B.data("jqfs-class"));p.change()}Y.hide();ab.removeClass("opened dropup dropdown");k.onSelectClosed.call(ab)});Y.mouseout(function(){a("li.sel",Y).addClass("selected")});p.on("change.styler",function(){S.text(q.filter(":selected").text()).removeClass("placeholder");X.removeClass("selected sel").not(".optgroup").eq(p[0].selectedIndex).addClass("selected sel");q.first().text()!=X.filter(".selected").text()?ab.addClass("changed"):ab.removeClass("changed")}).on("focus.styler",function(){ab.addClass("focused");a("div.jqselect").not(".focused").removeClass("opened dropup dropdown").find("div.jq-selectbox__dropdown").hide()}).on("blur.styler",function(){ab.removeClass("focused")}).on("keydown.styler keyup.styler",function(w){var A=X.data("li-height");""===p.val()?S.text(z).addClass("placeholder"):S.text(q.filter(":selected").text());X.removeClass("selected sel").not(".optgroup").eq(p[0].selectedIndex).addClass("selected sel");if(38==w.which||37==w.which||33==w.which||36==w.which){""===p.val()?U.scrollTop(0):U.scrollTop(U.scrollTop()+X.filter(".selected").position().top)}40!=w.which&&39!=w.which&&34!=w.which&&35!=w.which||U.scrollTop(U.scrollTop()+X.filter(".selected").position().top-U.innerHeight()+A);13==w.which&&(w.preventDefault(),Y.hide(),ab.removeClass("opened dropup dropdown"),k.onSelectClosed.call(ab))}).on("keydown.styler",function(w){32==w.which&&(w.preventDefault(),t.click())});d.registered||(a(document).on("click",d),d.registered=!0)}function s(){var A=new m,z=a("<div"+A.id+' class="jq-select-multiple jqselect'+A.classes+'"'+A.title+' style="display: inline-block; position: relative"></div>');p.css({margin:0,padding:0}).after(z);v();z.append("<ul>"+r+"</ul>");var x=a("ul",z).css({position:"relative","overflow-x":"hidden","-webkit-overflow-scrolling":"touch"}),t=a("li",z).attr("unselectable","on"),A=p.attr("size"),B=x.outerHeight(),w=t.outerHeight();void 0!==A&&0<A?x.css({height:w*A}):x.css({height:4*w});B>z.height()&&(x.css("overflowY","scroll"),h(x),t.filter(".selected").length&&x.scrollTop(x.scrollTop()+t.filter(".selected").position().top));p.prependTo(z).css({position:"absolute",left:0,top:0,width:"100%",height:"100%",opacity:0});if(p.is(":disabled")){z.addClass("disabled"),q.each(function(){a(this).is(":selected")&&t.eq(a(this).index()).addClass("selected")})}else{if(t.filter(":not(.disabled):not(.optgroup)").click(function(E){p.focus();var D=a(this);E.ctrlKey||E.metaKey||D.addClass("selected");E.shiftKey||D.addClass("first");E.ctrlKey||(E.metaKey||E.shiftKey)||D.siblings().removeClass("selected first");if(E.ctrlKey||E.metaKey){D.is(".selected")?D.removeClass("selected first"):D.addClass("selected first"),D.siblings().removeClass("first")}if(E.shiftKey){var C=!1,y=!1;D.siblings().removeClass("selected").siblings(".first").addClass("selected");D.prevAll().each(function(){a(this).is(".first")&&(C=!0)});D.nextAll().each(function(){a(this).is(".first")&&(y=!0)});C&&D.prevAll().each(function(){if(a(this).is(".selected")){return !1}a(this).not(".disabled, .optgroup").addClass("selected")});y&&D.nextAll().each(function(){if(a(this).is(".selected")){return !1}a(this).not(".disabled, .optgroup").addClass("selected")});1==t.filter(".selected").length&&D.addClass("first")}q.prop("selected",!1);t.filter(".selected").each(function(){var F=a(this),G=F.index();F.is(".option")&&(G-=F.prevAll(".optgroup").length);q.eq(G).prop("selected",!0)});p.change()}),q.each(function(y){a(this).data("optionIndex",y)}),p.on("change.styler",function(){t.removeClass("selected");var y=[];q.filter(":selected").each(function(){y.push(a(this).data("optionIndex"))});t.not(".optgroup").filter(function(C){return -1<a.inArray(C,y)}).addClass("selected")}).on("focus.styler",function(){z.addClass("focused")}).on("blur.styler",function(){z.removeClass("focused")}),B>z.height()){p.on("keydown.styler",function(y){38!=y.which&&37!=y.which&&33!=y.which||x.scrollTop(x.scrollTop()+t.filter(".selected").position().top-w);40!=y.which&&39!=y.which&&34!=y.which||x.scrollTop(x.scrollTop()+t.filter(".selected:last").position().top-x.innerHeight()+2*w)})}}}var q=a("option",p),r="";p.is("[multiple]")?j||o||s():u()};l();p.on("refresh",function(){p.off(".styler").parent().before(p).remove();l()})}else{if(p.is(":reset")){p.on("click",function(){setTimeout(function(){p.closest(k.wrapper).find("input, select").trigger("refresh")},1)})}}}}}}},destroy:function(){var b=a(this.element);b.is(":checkbox")||b.is(":radio")?(b.removeData("_"+c).off(".styler refresh").removeAttr("style").parent().before(b).remove(),b.closest("label").add('label[for="'+b.attr("id")+'"]').off(".styler")):b.is('input[type="number"]')?b.removeData("_"+c).off(".styler refresh").closest(".jq-number").before(b).remove():(b.is(":file")||b.is("select"))&&b.removeData("_"+c).off(".styler refresh").removeAttr("style").parent().before(b).remove()}};a.fn[c]=function(h){var b=arguments;if(void 0===h||"object"===typeof h){return this.each(function(){a.data(this,"_"+c)||a.data(this,"_"+c,new f(this,h))}).promise().done(function(){var i=a(this[0]).data("_"+c);i&&i.options.onFormStyled.call()}),this}if("string"===typeof h&&"_"!==h[0]&&"init"!==h){var g;this.each(function(){var i=a.data(this,"_"+c);i instanceof f&&"function"===typeof i[h]&&(g=i[h].apply(i,Array.prototype.slice.call(b,1)))});return void 0!==g?g:this}};d.registered=!1});